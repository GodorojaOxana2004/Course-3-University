# Лабораторная работа 2 — Основы сетей — Готовый отчёт

**Студент:** Oxana Godoroja

**Дата:** 2025-09-20

---

## 1. Цель работы

Освоить базовые сетевые команды и инструменты диагностики в Linux: посмотреть IP/MAC интерфейсов, таблицу маршрутов, работать с DNS, трассировку, порты и простые сетевые тесты. Подготовить мини‑проект — сетевой отчёт для выбранного сайта.

---

## 2. Краткое теоретическое введение

**IP-адрес и маска сети.** IP-адрес — адрес узла в IP-сети. Маска определяет подсеть (например, `/24` → маска `255.255.255.0`).

**MAC-адрес.** Физический адрес сетевой карты в локальной сети (link-layer).

**Маршрутизация.** Таблица маршрутов определяет, куда отправлять пакеты по различным сетевым префиксам.

**DNS.** Служба разрешения имён в IP-адреса. Если DNS недоступен — разрешение имён падает, но прямой звонок по IP остаётся.

**Утилиты, используемые в работе:** `ip`, `ifconfig` (редко), `ping`, `traceroute`/`tracert`, `ss`, `netstat`, `dig`, `curl`, `nc` (netcat), `nmap` (опционально).

---

## 3. Окружение и замечания

- Тестируемая система: Ubuntu / Debian / CentOS (команды указываются под Linux). Для некоторых действий может потребоваться `sudo`.
- Все примеры вывода ниже — **примерные**. 

---

## 4. Практические задания

### Часть 1: Базовая диагностика

**1 Определить IP- и MAC-адреса всех интерфейсов**

Команда:

```bash
ip addr show             # современный способ
# или
ifconfig -a              # старый, может быть не установлен
```

**Пояснение:** `ip addr` выводит список интерфейсов с их IPv4/IPv6 адресами и MAC.

**Вывод:**


Список интерфейсов, IP и MAC:

![img](/images/1.png)


**2 Вывести таблицу маршрутизации**

Команда:

```bash
ip route show
# или
route -n         # старый вариант
```

**Вывод:**

![img](/images/2.png)


**Анализ:** `default via` показывает шлюз по умолчанию (куда идут пакеты в интернет).


**3 Проверить доступность узла 8.8.8.8 и сайта google.com**

Команды:

```bash
ping -c 4 8.8.8.8
ping -c 4 google.com
```

**Вывод:**

![img](/images/3.png)


**4 Сравнение: что произойдёт, если DNS не работает?**

Если DNS не работает, `ping google.com` выдаст `ping: google.com: Name or service not known` (или похожую ошибку), потому что имя не переводится в IP.

![img](/images/4.png)

**Как смоделировать отключение DNS:** временно изменить `/etc/resolv.conf` на некорректный сервер или остановить systemd-resolved.

![img](/images/5.png)

---

### Часть 2: Маршруты и трассировка

**1 Выполнить трассировку до google.com**

Команды (Linux):

```bash
traceroute -m 30 google.com      

tracepath google.com
```

**Вывод:**
![img](/images/6.png)



**2 Сохранить список промежуточных узлов** — скопировать вывод в файл `traceroute_google.txt`:

```bash
traceroute google.com > traceroute_google.txt
```

Просто будут хранить информацию всю информацию в файле.

**3 Трассировка до локального сервера** — если в локальной сети есть сервер, выполнить `traceroute 192.168.1.10` и сохранить.

**Анализ:** нужно смотреть на места, где появляются большие задержки или потери пакетов — они указывают на проблемные сегменты.

![img](/images/7.png)
![img](/images/8.png)
![img](/images/9.png)

---

### Часть 3: Порты и соединения

**1 Какие порты слушает система**

Команды:

```bash
sudo ss -tuln        # современный аналог netstat
# или
sudo netstat -tulnp
```

**Вывод:**

![img](/images/10.png)

**2) Запустить локальный сервер для теста (netcat)**

В одном окне терминала запустите:

```bash
nc -l 12345            # слушать на порту 12345
```

Во втором окне подключитесь к нему:

```bash
nc localhost 12345
```

Напишите текст в одном окне — он отобразится в другом. Это простой способ проверить TCP-соединение.

![img](/images/11.png)
Два окна с TCP-соединением. Теперь между собой можно переговариваться.


---

### Часть 4: Работа с DNS

**1 Использовать `dig` для запроса IP-адреса домена**

```bash
dig +short google.com      # только адреса
# или
dig google.com
```

**Вывод:**

![img](/images/12.png)

**2 Какой DNS-сервер используется системой**

Посмотреть содержимое `/etc/resolv.conf`:

```bash
cat /etc/resolv.conf
```

**Вывод:**

![img](/images/13.png)


**3 Запросить MX-записи для gmail.com**

```bash
dig +short gmail.com MX
```

**Вывод:**

![img](/images/14.png)



---

### Часть 5: Мини-проект — сетевой отчёт по сайту (пример: github.com)

Я выбрала сайт: **github.com** — ниже шаги, команды и собранная информация.

#### 1 IP-адреса и DNS-записи сайта

Команды для получения:

```bash
dig +short github.com A
dig github.com ANY
host github.com
```

У крупных сервисов (GitHub) имя может резолвиться в несколько IP-адресов (разные региональные ноды), и они могут меняться со временем. GitHub публикует свои IP-диапазоны через Meta API, и у них есть отдельные IP для GitHub Pages.

![img](/images/15.png)
![img](/images/16.png)


#### 2 Трассировка до сервера

Команда:

```bash
traceroute github.com > traceroute_github.txt
```

В отчёт включить вывод и краткий анализ (где большие задержки/потери).


#### 3 Список открытых портов

Команды (удалённая проверка):

```bash
nmap -Pn -sT github.com   # простой TCP scan (нужны права и согласие; не сканируйте чужие сети без разрешения)
# или
nc -vz github.com 22
nc -vz github.com 80
nc -vz github.com 443
```

**Ожидаемые обычные порты (типично для GitHub):** `22` (SSH), `80` (HTTP), `443` (HTTPS), иногда `9418` (git протокол), но политика и доступность портов может меняться.


#### 4) Заголовки HTTP-ответа

Команда:

```bash
curl -I https://github.com
```

**Пример вывода заголовков (пример):**

```
HTTP/2 200
server: GitHub.com
content-type: text/html; charset=utf-8
content-security-policy: default-src 'none'; ...
strict-transport-security: max-age=31536000; includeSubDomains; preload
```

В отчёте приложить полный вывод `curl -I`.


#### 5) SSL-сертификат (действителен ли?)

Команды:

```bash
openssl s_client -connect github.com:443 -servername github.com < /dev/null | openssl x509 -noout -dates -issuer -subject
```

**Возможный пример вывода:**

```
notBefore=2025-07-01T00:00:00Z
notAfter=2026-07-01T23:59:59Z
issuer= /C=US/O=DigiCert Inc/CN=DigiCert TLS Hybrid ECC SHA256 2020 CA1
subject=CN=github.com
```

**Анализ:** проверить текущую дату и `notAfter` — если срок прошёл, сертификат просрочен.


---

## 5. Контрольные вопросы — ответы

1. **Чем отличаются частные и публичные IP-адреса?**

   - Частные IP используются внутри локальных сетей и не маршрутизируются в Интернет (напр., `10.0.0.0/8`, `172.16.0.0/12`, `192.168.0.0/16`). Публичные IP видны в Интернете.

2. **Для чего нужны порты и какие протоколы их используют?**

   - Порты различают приложения/сервисы на одном IP (например, 80 — HTTP, 443 — HTTPS, 22 — SSH, 25 — SMTP). TCP/UDP — основные транспортные протоколы, использующие порты.

3. **Как работает DNS?**

   - DNS переводит доменные имена в IP-адреса через запросы к DNS‑серверам. Клиент запрашивает рекурсивный резолвер, он может обратиться к авторитетным серверам и вернуть результат. Результаты кэшируются в течении TTL.

4. **Как определить, открыт ли порт на удалённом хосте?**

   - Использовать `nc -vz host port`, `nmap host -p port` или попытаться установить соединение (например, `telnet host port` / `curl`). Если сервис отвечает — порт открыт; если отвечает RST или нет ответа — закрыт/фильтруется.


---

## 6. Выводы по работе

- Мы проверили основные сетевые утилиты: `ip`, `route`, `ping`, `traceroute`, `ss/netstat`, `dig`, `curl`, `nc`.
- Важный вывод: диагностика сети начинается с проверки IP, таблицы маршрутов и DNS; часто проблемы — в DNS или в маршрутах.
- Для мини-проекта важно собирать доказательства (выводы команд), сохранять файлы (`> output.txt`) и делать краткий анализ каждого шага.

---

## Приложение: Список использованных команд (с кратким описанием)

- `ip addr show` — список интерфейсов и адресов
- `ip route show` — таблица маршрутов
- `ping -c 4 <ip|host>` — проверка доступности
- `traceroute <host>` / `tracepath` — трассировка маршрута
- `ss -tuln` / `netstat -tulnp` — прослушиваемые порты
- `nc -l <port>` / `nc host port` — тест TCP-соединений
- `dig +short <domain>` — быстрый запрос DNS
- `curl -I <url>` — получить HTTP-заголовки
- `openssl s_client -connect host:443 -servername host` — получение сертификата
- `nmap -Pn -sT <host>` — сканирование портов (требует ответственного использования)







